version: "3.7"
services:
  mcpingme:
    image: ghcr.io/randomairborne/mcping
    restart: always
    networks:
      - proxy
    deploy:
      labels:
        traefik.enable: "true"
        traefik.http.routers.dswrap.rule: Host(`${HOST}`)
        traefik.http.routers.dswrap.entrypoints: https
        traefik.http.routers.dswrap.tls.certresolver: letsencrypt
        traefik.http.services.dswrap.loadbalancer.server.port: 8080
        traefik.http.routers.dswrap-http.rule: Host(`${HOST}`)
        traefik.http.routers.dswrap-http.entrypoints: http
        traefik.http.middlewares.https-redirect.redirectscheme.scheme: https
        traefik.http.middlewares.https-redirect.redirectscheme.permanent: "true"
        traefik.http.routers.dswrap-http.middlewares: https-redirect

networks:
  proxy:
    external: true